(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=3)})([function(a){!function(b,c){a.exports=c()}('undefined'==typeof self?this:self,function(){var b=Math.pow,d=Math.floor;return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(b,d,e){'use strict';var g=self.WebSocket,j=self.fetch,k=e(1),l=console.log,m=e(2),p=e(3),q=e(10),r=e(11),t=e(12);b.exports=t({websocket:g,uuid:m,fetch:j,eventEmitter:k,debug:l,protocolHelper:p,messageParser:q,sendFile:r})},function(b,a,c){var d;!function(g){'use strict';function e(){}function h(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function i(a){return function(){return this[a].apply(this,arguments)}}function j(a){return'function'==typeof a||a instanceof RegExp||a&&'object'==typeof a&&j(a.listener)}var k=e.prototype,a=g.EventEmitter;k.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp)for(c in b={},d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c]);else b=d[a]||(d[a]=[]);return b},k.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},k.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},k.addListener=function(a,b){if(!j(b))throw new TypeError('listener must be a function');var c,d=this.getListenersAsObject(a);for(c in d)d.hasOwnProperty(c)&&-1===h(d[c],b)&&d[c].push('object'==typeof b?b:{listener:b,once:!1});return this},k.on=i('addListener'),k.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},k.once=i('addOnceListener'),k.defineEvent=function(a){return this.getListeners(a),this},k.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},k.removeListener=function(a,b){var c,d,e=this.getListenersAsObject(a);for(d in e)e.hasOwnProperty(d)&&-1!==(c=h(e[d],b))&&e[d].splice(c,1);return this},k.off=i('removeListener'),k.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},k.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},k.manipulateListeners=function(a,b,c){var d,f,g=a?this.removeListener:this.addListener,h=a?this.removeListeners:this.addListeners;if('object'!=typeof b||b instanceof RegExp)for(d=c.length;d--;)g.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(f=b[d])&&('function'==typeof f?g.call(this,d,f):h.call(this,d,f));return this},k.removeEvent=function(a){var b,c=this._getEvents();if('string'==typeof a)delete c[a];else if(a instanceof RegExp)for(b in c)c.hasOwnProperty(b)&&a.test(b)&&delete c[b];else delete this._events;return this},k.removeAllListeners=i('removeEvent'),k.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(f in g)if(g.hasOwnProperty(f))for(c=g[f].slice(0),e=0;e<c.length;e++)d=c[e],!0===d.once&&this.removeListener(a,d.listener),d.listener.apply(this,b||[])===this._getOnceReturnValue()&&this.removeListener(a,d.listener);return this},k.trigger=i('emitEvent'),k.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},k.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},k._getOnceReturnValue=function(){return!this.hasOwnProperty('_onceReturnValue')||this._onceReturnValue},k._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return g.EventEmitter=a,e},void 0!==(d=function(){return e}.call(g,c,g,b))&&(b.exports=d)}(this||{})},function(a){'use strict';a.exports=function(){var a=new Date().getTime();return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(b){var c=0|(a+16*Math.random())%16;return a=d(a/16),('x'==b?c:8|3&c).toString(16)})}},function(a,b,c){'use strict';(function(b){function d(a){return a.map(function(a){return a.key+':'+a.value+'\r\n'}).join('')+'\r\n'}var g=c(9),h={platform:{win32:'Windows',darwin:'macOS',linux:'Linux'},name:{win32:{7:'Windows 7',8:'Windows 8',10:'Windows 10'},darwin:{6:'Snow Leopard',7:'Lion',8:'Mountain Lion',9:'Mavericks',10:'Yosemite',11:'El Capitan',12:'Sierra',13:'High Sierra'}}},i={context:{system:{version:'1.0.000'},os:{platform:'',name:'',version:''},device:{manufacturer:'Unknown',model:'Unknown',version:'Unknown'}}},e={};e.createSpeechConfigPacket=function(){var b=g.platform(),e=g.release(),j='win32'===b?e.split('.')[0]:e.split('.')[1],k=h.platform[b]||'Unknown',l=h.name[b]&&h.name[b][j]?h.name[b][j]:'Unknown';i.context.os={platform:k,name:l,version:e};var m=[];return m.push({key:'path',value:'speech.config'}),m.push({key:'x-timestamp',value:new Date().toISOString()}),m.push({key:'content-type',value:'application/json; charset=utf-8'}),''+d(m)+JSON.stringify(i)},e.createTelemetryPacket=function(a,b){var c=[];return c.push({key:'path',value:'telemetry'}),c.push({key:'x-timestamp',value:new Date().toISOString()}),c.push({key:'content-type',value:'application/json'}),c.push({key:'x-requestid',value:a}),''+d(c)+JSON.stringify(b)},e.createAudioPacket=function(c,e){var f=[{key:'path',value:'audio'},{key:'x-timestamp',value:new Date().toISOString()},{key:'content-type',value:'audio/x-wav'},{key:'x-requestid',value:c}],g=d(f),h=new b(g),i=new b([g.length/256,g.length%256]),j=new b(e);return b.concat([i,h,j])},a.exports=e}).call(b,c(4).Buffer)},function(a,y,e){'use strict';(function(r){function aa(){return ca.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ba(a,b){if(aa()<b)throw new RangeError('Invalid typed array length');return ca.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=ca.prototype):(null===a&&(a=new ca(b)),a.length=b),a}function ca(b,c,d){if(!(ca.TYPED_ARRAY_SUPPORT||this instanceof ca))return new ca(b,c,d);if('number'==typeof b){if('string'==typeof c)throw new Error('If encoding is specified then the first argument must be a string');return a(this,b)}return i(this,b,c,d)}function i(a,b,c,d){if('number'==typeof b)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&b instanceof ArrayBuffer?h(a,b,c,d):'string'==typeof b?f(a,b,c):l(a,b)}function o(a){if('number'!=typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative')}function n(a,b,c,d){return o(b),0>=b?ba(a,b):void 0===c?ba(a,b):'string'==typeof d?ba(a,b).fill(c,d):ba(a,b).fill(c)}function a(a,b){if(o(b),a=ba(a,0>b?0:0|p(b)),!ca.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function f(a,b,c){if('string'==typeof c&&''!==c||(c='utf8'),!ca.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|g(b,c);a=ba(a,d);var e=a.write(b,c);return e!==d&&(a=a.slice(0,e)),a}function c(a,b){var c=0>b.length?0:0|p(b.length);a=ba(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function h(a,b,d,e){if(b.byteLength,0>d||b.byteLength<d)throw new RangeError('\'offset\' is out of bounds');if(b.byteLength<d+(e||0))throw new RangeError('\'length\' is out of bounds');return b=void 0===d&&void 0===e?new Uint8Array(b):void 0===e?new Uint8Array(b,d):new Uint8Array(b,d,e),ca.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=ca.prototype):a=c(a,b),a}function l(a,b){if(ca.isBuffer(b)){var d=0|p(b.length);return a=ba(a,d),0===a.length?a:(b.copy(a,0,0,d),a)}if(b){if('undefined'!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||'length'in b)return'number'!=typeof b.length||X(b.length)?ba(a,0):c(a,b);if('Buffer'===b.type&&Z(b.data))return c(a,b.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function p(a){if(a>=aa())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+aa().toString(16)+' bytes');return 0|a}function g(a,b){if(ca.isBuffer(a))return a.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;'string'!=typeof a&&(a=''+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case'ascii':case'latin1':case'binary':return c;case'utf8':case'utf-8':case void 0:return z(a).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*c;case'hex':return c>>>1;case'base64':return q(a).length;default:if(d)return z(a).length;b=(''+b).toLowerCase(),d=!0;}}function s(a,b,c){var d=!1;if((void 0===b||0>b)&&(b=0),b>this.length)return'';if((void 0===c||c>this.length)&&(c=this.length),0>=c)return'';if(c>>>=0,b>>>=0,c<=b)return'';for(a||(a='utf8');;)switch(a){case'hex':return U(this,b,c);case'utf8':case'utf-8':return P(this,b,c);case'ascii':return k(this,b,c);case'latin1':case'binary':return O(this,b,c);case'base64':return S(this,b,c);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return L(this,b,c);default:if(d)throw new TypeError('Unknown encoding: '+a);a=(a+'').toLowerCase(),d=!0;}}function u(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function v(a,b,c,d,f){if(0===a.length)return-1;if('string'==typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648),c=+c,isNaN(c)&&(c=f?0:a.length-1),0>c&&(c=a.length+c),c>=a.length){if(f)return-1;c=a.length-1}else if(0>c){if(!f)return-1;c=0}if('string'==typeof b&&(b=ca.from(b,d)),ca.isBuffer(b))return 0===b.length?-1:m(a,b,c,d,f);if('number'==typeof b)return b&=255,ca.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):m(a,[b],c,d,f);throw new TypeError('val must be string, number or Buffer')}function m(b,d,e,g,j){function i(a,b){return 1===k?a[b]:a.readUInt16BE(b*k)}var k=1,m=b.length,n=d.length;if(void 0!==g&&('ucs2'===(g=(g+'').toLowerCase())||'ucs-2'===g||'utf16le'===g||'utf-16le'===g)){if(2>b.length||2>d.length)return-1;k=2,m/=2,n/=2,e/=2}var a;if(j){var f=-1;for(a=e;a<m;a++)if(!(i(b,a)===i(d,-1==f?0:a-f)))-1!=f&&(a-=a-f),f=-1;else if(-1==f&&(f=a),a-f+1===n)return f*k}else for(e+n>m&&(e=m-n),a=e;0<=a;a--){for(var c=!0,h=0;h<n;h++)if(i(b,a+h)!==i(d,h)){c=!1;break}if(c)return a}return-1}function w(a,b,c,d){c=+c||0;var e=a.length-c;d?(d=+d)>e&&(d=e):d=e;var f=b.length;if(0!=f%2)throw new TypeError('Invalid hex string');d>f/2&&(d=f/2);for(var g,h=0;h<d;++h){if(g=parseInt(b.substr(2*h,2),16),isNaN(g))return h;a[c+h]=g}return h}function E(a,b,c,d){return J(z(b,a.length-c),a,c,d)}function A(a,b,c,d){return J(G(b),a,c,d)}function _(a,b,c,d){return A(a,b,c,d)}function T(a,b,c,d){return J(q(b),a,c,d)}function R(a,b,c,d){return J(W(b,a.length-c),a,c,d)}function S(a,b,c){return 0===b&&c===a.length?ea.fromByteArray(a):ea.fromByteArray(a.slice(b,c))}function P(b,d,e){e=da(b.length,e);for(var g=[],j=d;j<e;){var i=b[j],k=null,l=239<i?4:223<i?3:191<i?2:1;if(j+l<=e){var m,a,f,c;1==l?128>i&&(k=i):2==l?(m=b[j+1],128==(192&m)&&127<(c=(31&i)<<6|63&m)&&(k=c)):3==l?(m=b[j+1],a=b[j+2],128==(192&m)&&128==(192&a)&&2047<(c=(15&i)<<12|(63&m)<<6|63&a)&&(55296>c||57343<c)&&(k=c)):4==l?(m=b[j+1],a=b[j+2],f=b[j+3],128==(192&m)&&128==(192&a)&&128==(192&f)&&65535<(c=(15&i)<<18|(63&m)<<12|(63&a)<<6|63&f)&&1114112>c&&(k=c)):void 0}null===k?(k=65533,l=1):65535<k&&(k-=65536,g.push(55296|1023&k>>>10),k=56320|1023&k),g.push(k),j+=l}return x(g)}function x(a){var b=a.length;if(b<=Q)return H.apply(String,a);for(var c='',d=0;d<b;)c+=H.apply(String,a.slice(d,d+=Q));return c}function k(a,b,c){var d='';c=da(a.length,c);for(var e=b;e<c;++e)d+=H(127&a[e]);return d}function O(a,b,c){var d='';c=da(a.length,c);for(var e=b;e<c;++e)d+=H(a[e]);return d}function U(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var f='',g=b;g<c;++g)f+=V(a[g]);return f}function L(a,b,c){for(var d=a.slice(b,c),e='',f=0;f<d.length;f+=2)e+=H(d[f]+256*d[f+1]);return e}function B(a,b,c){if(0!=a%1||0>a)throw new RangeError('offset is not uint');if(a+b>c)throw new RangeError('Trying to access beyond buffer length')}function M(a,b,c,d,e,f){if(!ca.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError('Index out of range')}function I(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=da(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function Y(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=da(a.length-c,4);e<f;++e)a[c+e]=255&b>>>8*(d?e:3-e)}function C(a,b,c,d){if(c+d>a.length)throw new RangeError('Index out of range');if(0>c)throw new RangeError('Index out of range')}function D(a,b,c,d,e){return e||C(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(a,b,c,d,23,4),c+4}function j(a,b,c,d,e){return e||C(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(a,b,c,d,52,8),c+8}function N(a){if(a=F(a).replace($,''),2>a.length)return'';for(;0!=a.length%4;)a+='=';return a}function F(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,'')}function V(a){return 16>a?'0'+a.toString(16):a.toString(16)}function z(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(55295<(c=a.charCodeAt(g))&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189),e=c;continue}c=65536+(e-55296<<10|c-56320)}else e&&-1<(b-=3)&&f.push(239,191,189);if(e=null,128>c){if(0>(b-=1))break;f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(192|c>>6,128|63&c)}else if(65536>c){if(0>(b-=3))break;f.push(224|c>>12,128|63&c>>6,128|63&c)}else{if(!(1114112>c))throw new Error('Invalid code point');if(0>(b-=4))break;f.push(240|c>>18,128|63&c>>12,128|63&c>>6,128|63&c)}}return f}function G(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function W(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!(0>(b-=2));++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function q(a){return ea.toByteArray(N(a))}function J(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function X(a){return a!==a}/*!
        * The buffer module from node.js, for the browser.
        *
        * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
        * @license  MIT
        */var H=String.fromCharCode,da=Math.min,ea=e(6),K=e(7),Z=e(8);y.Buffer=ca,y.SlowBuffer=function(a){return+a!=a&&(a=0),ca.alloc(+a)},y.INSPECT_MAX_BYTES=50,ca.TYPED_ARRAY_SUPPORT=void 0===r.TYPED_ARRAY_SUPPORT?function(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&'function'==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(a){return!1}}():r.TYPED_ARRAY_SUPPORT,y.kMaxLength=aa(),ca.poolSize=8192,ca._augment=function(a){return a.__proto__=ca.prototype,a},ca.from=function(a,b,c){return i(null,a,b,c)},ca.TYPED_ARRAY_SUPPORT&&(ca.prototype.__proto__=Uint8Array.prototype,ca.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&ca[Symbol.species]===ca&&Object.defineProperty(ca,Symbol.species,{value:null,configurable:!0})),ca.alloc=function(a,b,c){return n(null,a,b,c)},ca.allocUnsafe=function(b){return a(null,b)},ca.allocUnsafeSlow=function(b){return a(null,b)},ca.isBuffer=function(a){return null!=a&&a._isBuffer},ca.compare=function(a,b){if(!ca.isBuffer(a)||!ca.isBuffer(b))throw new TypeError('Arguments must be Buffers');if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=da(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},ca.isEncoding=function(a){switch((a+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},ca.concat=function(a,b){if(!Z(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return ca.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=ca.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var f=a[c];if(!ca.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(d,e),e+=f.length}return d},ca.byteLength=g,ca.prototype._isBuffer=!0,ca.prototype.swap16=function(){var a=this.length;if(0!=a%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var b=0;b<a;b+=2)u(this,b,b+1);return this},ca.prototype.swap32=function(){var a=this.length;if(0!=a%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var b=0;b<a;b+=4)u(this,b,b+3),u(this,b+1,b+2);return this},ca.prototype.swap64=function(){var a=this.length;if(0!=a%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var b=0;b<a;b+=8)u(this,b,b+7),u(this,b+1,b+6),u(this,b+2,b+5),u(this,b+3,b+4);return this},ca.prototype.toString=function(){var a=0|this.length;return 0==a?'':0===arguments.length?P(this,0,a):s.apply(this,arguments)},ca.prototype.equals=function(a){if(!ca.isBuffer(a))throw new TypeError('Argument must be a Buffer');return this===a||0===ca.compare(this,a)},ca.prototype.inspect=function(){var a='',b=y.INSPECT_MAX_BYTES;return 0<this.length&&(a=this.toString('hex',0,b).match(/.{2}/g).join(' '),this.length>b&&(a+=' ... ')),'<Buffer '+a+'>'},ca.prototype.compare=function(b,d,e,g,j){if(!ca.isBuffer(b))throw new TypeError('Argument must be a Buffer');if(void 0===d&&(d=0),void 0===e&&(e=b?b.length:0),void 0===g&&(g=0),void 0===j&&(j=this.length),0>d||e>b.length||0>g||j>this.length)throw new RangeError('out of range index');if(g>=j&&d>=e)return 0;if(g>=j)return-1;if(d>=e)return 1;if(d>>>=0,e>>>=0,g>>>=0,j>>>=0,this===b)return 0;for(var i=j-g,k=e-d,l=da(i,k),a=this.slice(g,j),f=b.slice(d,e),c=0;c<l;++c)if(a[c]!==f[c]){i=a[c],k=f[c];break}return i<k?-1:k<i?1:0},ca.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},ca.prototype.indexOf=function(a,b,c){return v(this,a,b,c,!0)},ca.prototype.lastIndexOf=function(a,b,c){return v(this,a,b,c,!1)},ca.prototype.write=function(a,b,c,d){if(void 0===b)d='utf8',c=this.length,b=0;else if(void 0===c&&'string'==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');b|=0,isFinite(c)?(c|=0,void 0===d&&(d='utf8')):(d=c,c=void 0)}var f=this.length-b;if((void 0===c||c>f)&&(c=f),0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError('Attempt to write outside buffer bounds');d||(d='utf8');for(var g=!1;;)switch(d){case'hex':return w(this,a,b,c);case'utf8':case'utf-8':return E(this,a,b,c);case'ascii':return A(this,a,b,c);case'latin1':case'binary':return _(this,a,b,c);case'base64':return T(this,a,b,c);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return R(this,a,b,c);default:if(g)throw new TypeError('Unknown encoding: '+d);d=(''+d).toLowerCase(),g=!0;}},ca.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;ca.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?0>(a+=c)&&(a=0):a>c&&(a=c),0>b?0>(b+=c)&&(b=0):b>c&&(b=c),b<a&&(b=a);var d;if(ca.TYPED_ARRAY_SUPPORT)d=this.subarray(a,b),d.__proto__=ca.prototype;else{var f=b-a;d=new ca(f,void 0);for(var g=0;g<f;++g)d[g]=this[g+a]}return d},ca.prototype.readUIntLE=function(a,b,c){a|=0,b|=0,c||B(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},ca.prototype.readUIntBE=function(a,b,c){a|=0,b|=0,c||B(a,b,this.length);for(var d=this[a+--b],e=1;0<b&&(e*=256);)d+=this[a+--b]*e;return d},ca.prototype.readUInt8=function(a,b){return b||B(a,1,this.length),this[a]},ca.prototype.readUInt16LE=function(a,b){return b||B(a,2,this.length),this[a]|this[a+1]<<8},ca.prototype.readUInt16BE=function(a,b){return b||B(a,2,this.length),this[a]<<8|this[a+1]},ca.prototype.readUInt32LE=function(a,b){return b||B(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},ca.prototype.readUInt32BE=function(a,b){return b||B(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},ca.prototype.readIntLE=function(a,c,d){a|=0,c|=0,d||B(a,c,this.length);for(var e=this[a],f=1,g=0;++g<c&&(f*=256);)e+=this[a+g]*f;return f*=128,e>=f&&(e-=b(2,8*c)),e},ca.prototype.readIntBE=function(a,c,d){a|=0,c|=0,d||B(a,c,this.length);for(var e=c,f=1,g=this[a+--e];0<e&&(f*=256);)g+=this[a+--e]*f;return f*=128,g>=f&&(g-=b(2,8*c)),g},ca.prototype.readInt8=function(a,b){return b||B(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},ca.prototype.readInt16LE=function(a,b){b||B(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},ca.prototype.readInt16BE=function(a,b){b||B(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},ca.prototype.readInt32LE=function(a,b){return b||B(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},ca.prototype.readInt32BE=function(a,b){return b||B(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},ca.prototype.readFloatLE=function(a,b){return b||B(a,4,this.length),K.read(this,a,!0,23,4)},ca.prototype.readFloatBE=function(a,b){return b||B(a,4,this.length),K.read(this,a,!1,23,4)},ca.prototype.readDoubleLE=function(a,b){return b||B(a,8,this.length),K.read(this,a,!0,52,8)},ca.prototype.readDoubleBE=function(a,b){return b||B(a,8,this.length),K.read(this,a,!1,52,8)},ca.prototype.writeUIntLE=function(a,c,d,e){(a=+a,c|=0,d|=0,!e)&&M(this,a,c,d,b(2,8*d)-1,0);var f=1,g=0;for(this[c]=255&a;++g<d&&(f*=256);)this[c+g]=255&a/f;return c+d},ca.prototype.writeUIntBE=function(a,c,d,e){(a=+a,c|=0,d|=0,!e)&&M(this,a,c,d,b(2,8*d)-1,0);var f=d-1,g=1;for(this[c+f]=255&a;0<=--f&&(g*=256);)this[c+f]=255&a/g;return c+d},ca.prototype.writeUInt8=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,1,255,0),ca.TYPED_ARRAY_SUPPORT||(a=d(a)),this[b]=255&a,b+1},ca.prototype.writeUInt16LE=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,2,65535,0),ca.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):I(this,a,b,!0),b+2},ca.prototype.writeUInt16BE=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,2,65535,0),ca.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):I(this,a,b,!1),b+2},ca.prototype.writeUInt32LE=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,4,4294967295,0),ca.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):Y(this,a,b,!0),b+4},ca.prototype.writeUInt32BE=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,4,4294967295,0),ca.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):Y(this,a,b,!1),b+4},ca.prototype.writeIntLE=function(a,c,d,e){if(a=+a,c|=0,!e){var f=b(2,8*d-1);M(this,a,c,d,f-1,-f)}var g=0,h=1,j=0;for(this[c]=255&a;++g<d&&(h*=256);)0>a&&0==j&&0!==this[c+g-1]&&(j=1),this[c+g]=255&(a/h>>0)-j;return c+d},ca.prototype.writeIntBE=function(a,c,d,e){if(a=+a,c|=0,!e){var f=b(2,8*d-1);M(this,a,c,d,f-1,-f)}var g=d-1,h=1,j=0;for(this[c+g]=255&a;0<=--g&&(h*=256);)0>a&&0==j&&0!==this[c+g+1]&&(j=1),this[c+g]=255&(a/h>>0)-j;return c+d},ca.prototype.writeInt8=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,1,127,-128),ca.TYPED_ARRAY_SUPPORT||(a=d(a)),0>a&&(a=255+a+1),this[b]=255&a,b+1},ca.prototype.writeInt16LE=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,2,32767,-32768),ca.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):I(this,a,b,!0),b+2},ca.prototype.writeInt16BE=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,2,32767,-32768),ca.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):I(this,a,b,!1),b+2},ca.prototype.writeInt32LE=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,4,2147483647,-2147483648),ca.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):Y(this,a,b,!0),b+4},ca.prototype.writeInt32BE=function(a,b,c){return a=+a,b|=0,c||M(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),ca.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):Y(this,a,b,!1),b+4},ca.prototype.writeFloatLE=function(a,b,c){return D(this,a,b,!0,c)},ca.prototype.writeFloatBE=function(a,b,c){return D(this,a,b,!1,c)},ca.prototype.writeDoubleLE=function(a,b,c){return j(this,a,b,!0,c)},ca.prototype.writeDoubleBE=function(a,b,c){return j(this,a,b,!1,c)},ca.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),0<d&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError('targetStart out of bounds');if(0>c||c>=this.length)throw new RangeError('sourceStart out of bounds');if(0>d)throw new RangeError('sourceEnd out of bounds');d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&c<b&&b<d)for(e=f-1;0<=e;--e)a[e+b]=this[e+c];else if(1e3>f||!ca.TYPED_ARRAY_SUPPORT)for(e=0;e<f;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},ca.prototype.fill=function(b,c,d,f){if('string'==typeof b){if('string'==typeof c?(f=c,c=0,d=this.length):'string'==typeof d&&(f=d,d=this.length),1===b.length){var g=b.charCodeAt(0);256>g&&(b=g)}if(void 0!==f&&'string'!=typeof f)throw new TypeError('encoding must be a string');if('string'==typeof f&&!ca.isEncoding(f))throw new TypeError('Unknown encoding: '+f)}else'number'==typeof b&&(b&=255);if(0>c||this.length<c||this.length<d)throw new RangeError('Out of range index');if(d<=c)return this;c>>>=0,d=void 0===d?this.length:d>>>0,b||(b=0);var h;if('number'==typeof b)for(h=c;h<d;++h)this[h]=b;else{var i=ca.isBuffer(b)?b:z(new ca(b,f).toString()),j=i.length;for(h=0;h<d-c;++h)this[h+c]=i[h%j]}return this};var $=/[^+\/0-9A-Za-z-_]/g}).call(y,e(5))},function(a){var b=function(){return this}();try{b=b||Function('return this')()||(0,eval)('this')}catch(a){'object'==typeof window&&(b=window)}a.exports=b},function(b,d){'use strict';function j(a){var b=a.length;if(0<b%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===a[b-2]?2:'='===a[b-1]?1:0}function e(b){var d,e,g,h,i,k=b.length;h=j(b),i=new c(3*k/4-h),e=0<h?k-4:k;var l=0;for(d=0;d<e;d+=4)g=f[b.charCodeAt(d)]<<18|f[b.charCodeAt(d+1)]<<12|f[b.charCodeAt(d+2)]<<6|f[b.charCodeAt(d+3)],i[l++]=255&g>>16,i[l++]=255&g>>8,i[l++]=255&g;return 2===h?(g=f[b.charCodeAt(d)]<<2|f[b.charCodeAt(d+1)]>>4,i[l++]=255&g):1==h&&(g=f[b.charCodeAt(d)]<<10|f[b.charCodeAt(d+1)]<<4|f[b.charCodeAt(d+2)]>>2,i[l++]=255&g>>8,i[l++]=255&g),i}function k(a){return q[63&a>>18]+q[63&a>>12]+q[63&a>>6]+q[63&a]}function i(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(k(d));return e.join('')}function m(b){for(var c,d=b.length,e=d%3,f='',g=[],h=0,j=d-e;h<j;h+=16383)g.push(i(b,h,h+16383>j?j:h+16383));return 1==e?(c=b[d-1],f+=q[c>>2],f+=q[63&c<<4],f+='=='):2==e&&(c=(b[d-2]<<8)+b[d-1],f+=q[c>>10],f+=q[63&c>>4],f+=q[63&c<<2],f+='='),g.push(f),g.join('')}d.byteLength=function(a){return 3*a.length/4-j(a)},d.toByteArray=e,d.fromByteArray=m;for(var q=[],f=[],c='undefined'==typeof Uint8Array?Array:Uint8Array,a='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',h=0,l=a.length;h<l;++h)q[h]=a[h],f[a.charCodeAt(h)]=h;f[45]=62,f[95]=63},function(a,c){c.read=function(d,g,e,j,k){var i,m,n=8*k-j-1,o=(1<<n)-1,a=o>>1,f=-7,q=e?k-1:0,h=e?-1:1,l=d[g+q];for(q+=h,i=l&(1<<-f)-1,l>>=-f,f+=n;0<f;i=256*i+d[g+q],q+=h,f-=8);for(m=i&(1<<-f)-1,i>>=-f,f+=j;0<f;m=256*m+d[g+q],q+=h,f-=8);if(0===i)i=1-a;else{if(i===o)return m?NaN:1/0*(l?-1:1);m+=b(2,j),i-=a}return(l?-1:1)*m*b(2,i-j)},c.write=function(j,k,e,m,n,i){var o,q,r,a=8*i-n-1,f=(1<<a)-1,c=f>>1,h=23===n?5.960464477539063e-8-6.617444900424222e-24:0,l=m?0:i-1,p=m?1:-1,g=0>k||0===k&&0>1/k?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(q=isNaN(k)?1:0,o=f):(o=d(Math.log(k)/Math.LN2),1>k*(r=b(2,-o))&&(o--,r*=2),k+=1<=o+c?h/r:h*b(2,1-c),2<=k*r&&(o++,r/=2),o+c>=f?(q=0,o=f):1<=o+c?(q=(k*r-1)*b(2,n),o+=c):(q=k*b(2,c-1)*b(2,n),o=0));8<=n;j[e+l]=255&q,l+=p,q/=256,n-=8);for(o=o<<n|q,a+=n;0<a;j[e+l]=255&o,l+=p,o/=256,a-=8);j[e+l-p]|=128*g}},function(a){var b={}.toString;a.exports=Array.isArray||function(a){return'[object Array]'==b.call(a)}},function(a,b){var c=Number.MAX_VALUE;b.endianness=function(){return'LE'},b.hostname=function(){return'undefined'==typeof location?'':location.hostname},b.loadavg=function(){return[]},b.uptime=function(){return 0},b.freemem=function(){return c},b.totalmem=function(){return c},b.cpus=function(){return[]},b.type=function(){return'Browser'},b.release=function(){return'undefined'==typeof navigator?'':navigator.appVersion},b.networkInterfaces=b.getNetworkInterfaces=function(){return{}},b.arch=function(){return'javascript'},b.platform=function(){return'browser'},b.tmpdir=b.tmpDir=function(){return'/tmp'},b.EOL='\n',b.homedir=function(){return'/'}},function(a){'use strict';a.exports.parse=function(a){var b={};return a.split('\r\n').forEach(function(a){var c=new String(a);if(c.startsWith('{'))b.body=c;else{var d=c.split(':');2===d.length&&(b[d[0].trim().toLowerCase()]=d[1].trim())}}),b}},function(a){'use strict';function b(a,c,d){var e=this,f=c.byteLength,g=a+32e3,h=c.slice(a,g);return(this.sendChunk(h),!(g<f))?d():void(a=g,setTimeout(function(){return b.call(e,a,c,d)},200))}a.exports=function(a){var c=this;return new Promise(function(d,e){a&&a.byteLength||e(new Error('could not send File: not a valid ArrayBuffer')),c.telemetry.Metrics.push({Start:new Date().toISOString(),Name:'Microphone',End:''}),b.call(c,0,a,d)})}},function(a,b,c){'use strict';(function(b){function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function h(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function j(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var i=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a.exports=function(k){var m,p=k.websocket,n=k.uuid,e=k.fetch,a=k.eventEmitter,f=k.protocolHelper,q=k.messageParser,o=k.sendFile,l=b&&b.env&&b.env.DEBUG,g={"turn.start":[],"speech.startDetected":[],"speech.hypothesis":[],"speech.endDetected":[],"speech.phrase":[],"speech.fragment":[],"turn.end":[]},r={format:'simple',language:'en-US',mode:'conversation',issueTokenUrl:'https://api.cognitive.microsoft.com/sts/v1.0/issueToken',accessToken:null};return function(b){function d(b){c(this,d);var e=h(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));e.options=Object.assign({},r,b),m=e.options.debug||l?k.debug:function(){};var f='wss://speech.platform.bing.com/speech/recognition/'+e.options.mode+'/cognitiveservices/v1?language='+e.options.language+'&format='+e.options.format;return e.serviceUrl=e.options.serviceUrl||f,e.issueTokenUrl=e.options.issueTokenUrl,e.telemetry={Metrics:[],ReceivedMessages:g},e.currentTurnGuid=n().replace(/-/g,''),Object.assign(p.prototype,a.prototype),e}return j(d,b),i(d,[{key:'_resetTelemetry',value:function(a){var b=Array.isArray(a)&&-1<a.indexOf('Metrics')?[]:this.telemetry.Metrics,c=Array.isArray(a)&&-1<a.indexOf('ReceivedMessages')?g:this.telemetry.ReceivedMessages;this.telemetry.Metrics=b,this.telemetry.ReceivedMessages=c}},{key:'_sendToSocketServer',value:function(a){if(1!==this.connection.readyState)throw new Error('could not send: connection to service not open');this.connection.send(a)}},{key:'sendChunk',value:function(a){var b=f.createAudioPacket(this.currentTurnGuid,a);this._sendToSocketServer(b)}},{key:'sendStream',value:function(a){var b=this;return new Promise(function(c){b.telemetry.Metrics.push({Start:new Date().toISOString(),Name:'Microphone',End:''}),a.on('data',b.sendChunk.bind(b)),a.on('end',function(){m('audio stream end'),c()})})}},{key:'_getAccessToken',value:function(){if(this.options.accessToken)return m('access token supplied via options'),Promise.resolve(this.options.accessToken);var a={method:'POST',headers:{"Ocp-Apim-Subscription-Key":this.options.subscriptionKey}};return m('requesting access token'),e(this.issueTokenUrl,a).then(function(a){return a.text()})}},{key:'onMessage',value:function(a){var b=a.data,c=q.parse(b),d=c.path,e=c.body?JSON.parse(c.body):{};if((m(d),'turn.start'===d&&(this.turn.active=!0),'speech.phrase'===d&&this.emit('recognition',e),'speech.endDetected'===d)&&(this.telemetry.Metrics.filter(function(a){return'Microphone'===a.Name}).pop().End=new Date().toISOString()),'turn.end'===d){this.turn.active=!1;var g=f.createTelemetryPacket(this.currentTurnGuid,this.telemetry);this._sendToSocketServer(g),this._resetTelemetry(['ReceivedMessages']),this.currentTurnGuid=n().replace(/-/g,'')}this.telemetry.ReceivedMessages[d].push(new Date().toISOString()),this.emit(d,e),this.emit('data',JSON.stringify(b.utf8Data))}},{key:'start',value:function(){var a=this;return this.connectionGuid=n().replace(/-/g,''),this._getAccessToken().then(function(b){return m('access token request successful'),a.telemetry.Metrics.push({Name:'Connection',Id:a.connectionGuid,Start:new Date().toISOString(),End:''}),a._connectToWebsocket(b)})}},{key:'stop',value:function(){var a=this;return new Promise(function(b,c){return(!a.connection||1===!a.connection.readyState)&&callback?b():void(a.once('close',b()),a.once('error',c()),a.connection.close(),m('closing speech websocket connection'))})}},{key:'_connectToWebsocket',value:function(a){m('opening websocket at:',this.serviceUrl);var b={Authorization:'Bearer '+a,"X-ConnectionId":this.connectionGuid},c=Object.keys(b).map(function(a){return'&'+a.replace('-','')+'='+b[a]}),d=''+this.serviceUrl+encodeURI(c.join('')),e=new p(d);return this._setUpClientEvents(e)}},{key:'_setUpClientEvents',value:function(a){var b=this;return new Promise(function(c,d){a.onmessage=b.onMessage.bind(b),a.onerror=function(a){b.emit('error',a),m('socket error:',a)},a.onclose=function(a){m('socket close:',a),b.emit('close'),a&&1e3!==a.code&&d(a)},a.onopen=function(){m('connected to websocket'),b.connection=a,b.sendFile=o.bind(b),b.turn={active:!1},b.telemetry.Metrics[0].End=new Date().toISOString(),m('sending config packet');var d=f.createSpeechConfigPacket(b.connectionGuid);b._sendToSocketServer(d),b.emit('connect'),c()}})}}]),d}(a)}}).call(b,c(13))},function(b){function e(){throw new Error('setTimeout has not been defined')}function j(){throw new Error('clearTimeout has not been defined')}function k(a){if(f===setTimeout)return setTimeout(a,0);if((f===e||!f)&&setTimeout)return f=setTimeout,setTimeout(a,0);try{return f(a,0)}catch(b){try{return f.call(null,a,0)}catch(b){return f.call(this,a,0)}}}function i(a){if(q===clearTimeout)return clearTimeout(a);if((q===j||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(b){try{return q.call(null,a)}catch(b){return q.call(this,a)}}}function m(){g&&l&&(g=!1,l.length?p=l.concat(p):s=-1,p.length&&n())}function n(){if(!g){var a=k(m);g=!0;for(var b=p.length;b;){for(l=p,p=[];++s<b;)l&&l[s].run();s=-1,b=p.length}l=null,g=!1,i(a)}}function o(a,b){this.fun=a,this.array=b}function a(){}var f,q,r=b.exports={};!function(){try{f='function'==typeof setTimeout?setTimeout:e}catch(a){f=e}try{q='function'==typeof clearTimeout?clearTimeout:j}catch(a){q=j}}();var l,p=[],g=!1,s=-1;r.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new o(a,b)),1!==p.length||g||k(n)},o.prototype.run=function(){this.fun.apply(null,this.array)},r.title='browser',r.browser=!0,r.env={},r.argv=[],r.version='',r.versions={},r.on=a,r.addListener=a,r.once=a,r.off=a,r.removeListener=a,r.removeAllListeners=a,r.emit=a,r.prependListener=a,r.prependOnceListener=a,r.listeners=function(){return[]},r.binding=function(){throw new Error('process.binding is not supported')},r.cwd=function(){return'/'},r.chdir=function(){throw new Error('process.chdir is not supported')},r.umask=function(){return 0}}])})},,,function(a,b,c){'use strict';function d(a){k.setAttribute('disabled',!0),o.style.display='inline',n.innerHTML='',m.innerHTML='';const b=new f.a(p);b.start().then(()=>{console.log('service started'),m.innerHTML+='service started<br/>',b.on('turn.start',()=>m.innerHTML+='turn.start<br/>'),b.on('speech.startDetected',()=>m.innerHTML+='speech.startDetected<br/>'),b.on('speech.endDetected',()=>m.innerHTML+='speech.endDetected<br/>'),b.on('speech.phrase',()=>m.innerHTML+='speech.phrase<br/>'),b.on('recognition',(a)=>{'Success'===a.RecognitionStatus&&(console.log(a),n.innerHTML+=`<p>${a.DisplayText}</p>`)}),b.on('close',()=>{k.removeAttribute('disabled'),o.style.display='none',m.innerHTML+='service stopped<br/>[end]'}),b.on('turn.end',()=>{b.stop(),n.innerHTML+='[end]',m.innerHTML+='turn.end<br/>'});const c=new FileReader;c.addEventListener('loadend',(a)=>{console.log('sound file loaded:',a.currentTarget.result),m.innerHTML+='audio file loaded</br>',b.sendFile(a.currentTarget.result).then(()=>m.innerHTML+='audio file sent</br>').catch(console.error)}),c.readAsArrayBuffer(a)}).catch((a)=>console.error('could not start service:',a))}Object.defineProperty(b,'__esModule',{value:!0});var e=c(0),f=c.n(e);const g=document.querySelector('form'),h=g.querySelector('#fileupload'),i=g.querySelector('button'),j=g.querySelector('#filename'),k=g.querySelector('input[type="submit"]'),l=g.querySelector('input[type="text"]'),m=document.querySelector('#log'),n=document.querySelector('#messages'),o=document.querySelector('#spinner'),p={format:'simple',language:'en-US',subscriptionKey:'',debug:!0};g.addEventListener('submit',(a)=>{a.preventDefault(),p.subscriptionKey=l.value;const b=h.files;if(b.length){const a=b[0];d(a)}}),i.addEventListener('click',()=>h.click()),h.addEventListener('change',(a)=>{const b=a.target.files[0];j.innerHTML=b.name})}]);